# まいカゴ セキュリティ監査チェックリスト

## 事前チェック

### 1. 環境変数設定
- [ ] `MAIKAGO_ALLOW_CLIENT_DONATION_WRITE=false` (本番環境)
- [ ] `MAIKAGO_SPECIAL_DONOR_EMAIL=""` (本番環境)
- [ ] `MAIKAGO_ENABLE_DEBUG_MODE=false` (本番環境)
- [ ] `MAIKAGO_SECURITY_LEVEL=strict` (本番環境)

### 2. ファイル確認
- [ ] `google-services.json` がGitに含まれていない
- [ ] `key.properties` がGitに含まれていない
- [ ] `.env` ファイルがGitに含まれていない

### 3. コードレビュー
- [ ] ハードコードされたパスワードがない
- [ ] ハードコードされたAPIキーがない
- [ ] ハードコードされたメールアドレスがない
- [ ] PII（個人情報）のログ出力がない

## ビルド時チェック

### 1. デバッグ情報
- [ ] デバッグログが無効化されている
- [ ] 詳細なエラーメッセージが一般化されている
- [ ] スタックトレースが露出していない

### 2. 設定確認
- [ ] 本番用の広告IDが設定されている
- [ ] セキュリティレベルが適切に設定されている
- [ ] 寄付データの書き込みが制限されている

## 実行時チェック

### 1. 認証・認可
- [ ] 未認証ユーザーのデータアクセスが制限されている
- [ ] ユーザー間のデータ分離が適切に動作している
- [ ] 匿名セッションのFirebaseアクセスが禁止されている

### 2. データ保護
- [ ] 個人情報が適切にマスクされている
- [ ] 機密データが暗号化されている
- [ ] データの永続化が適切に制御されている

### 3. 通信セキュリティ
- [ ] HTTPS通信が使用されている
- [ ] API通信が適切に認証されている
- [ ] ネットワークエラーが適切に処理されている

## 定期監査項目

### 月次チェック
- [ ] 依存関係の脆弱性チェック
- [ ] Firebaseセキュリティルールの見直し
- [ ] アクセスログの確認

### 四半期チェック
- [ ] セキュリティ設定の見直し
- [ ] 認証フローの確認
- [ ] データ保護方針の更新

### 年次チェック
- [ ] セキュリティ監査の実施
- [ ] ペネトレーションテストの実施
- [ ] セキュリティポリシーの更新

## 緊急時対応

### セキュリティインシデント発生時
1. 影響範囲の特定
2. 一時的なアクセス制限
3. ログの保存・分析
4. 修正・対策の実施
5. 再発防止策の検討

### 連絡先
- 開発者: [連絡先情報]
- セキュリティ担当: [連絡先情報]
- 緊急時: [緊急連絡先]

## 記録

### 監査実施日
- 日付: _____________
- 実施者: _____________
- 結果: _____________

### 発見事項
- [ ] 問題なし
- [ ] 軽微な問題（要対応）
- [ ] 重要な問題（緊急対応必要）

### 対応状況
- [ ] 対応完了
- [ ] 対応中
- [ ] 要検討
