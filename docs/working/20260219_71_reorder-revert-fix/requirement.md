# 要件定義

**Issue**: #71
**作成日**: 2026-02-19
**ラベル**: bug

## ユーザーストーリー

ユーザー「リストのアイテムをドラッグして並べ替えたのに、手を離すと元の位置に戻ってしまう。しばらくすると正しい位置に移動するが、一瞬元に戻るのが気になる」
アプリ「並べ替え操作後、即座に新しい順序でリストを表示し、バックグラウンドでFirebaseに保存する」

## 要件一覧

### 必須要件

- [ ] リスト並べ替え（ドラッグ＆ドロップ）後、UIが即座に新しい順序を反映すること
- [ ] Firebase書き込みが完了する前にUIが更新されること（楽観的更新）

### オプション要件

- [ ] なし

## 受け入れ基準

- [ ] アイテムを並べ替えた後、一瞬たりとも元の順序に戻らないこと
- [ ] 未購入リスト・購入済みリストの両方で正常に動作すること
- [ ] 既存テストがすべてパスすること
- [ ] `flutter analyze` でエラーがないこと
