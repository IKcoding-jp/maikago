# テスト計画

## テスト戦略

### 基本方針
- パフォーマンス改善は動作を変更しないため、既存テストが全てパスすることが最低条件
- 各フェーズ完了後にflutter testを実行
- flutter analyzeでLintエラーがないことを確認

### ユニットテスト

既存テストの実行で回帰確認:
```bash
flutter test
```

### 手動確認項目

#### フェーズ1完了後
- [ ] メイン画面でアイテム追加/削除/チェック切り替えが正常動作する
- [ ] ショップタブの切り替えが正常動作する
- [ ] ショップの追加/削除後にTabControllerが正しく更新される
- [ ] 設定画面のオートコンプリート/取り消し線トグルが正常動作する

#### フェーズ2完了後
- [ ] 設定画面のテーマ/フォント/フォントサイズ変更が即座に反映される
- [ ] レシピ確認画面でアイテムの追加操作が正常動作する
- [ ] AppBarのタブ追加ボタンが正常動作する
- [ ] 画面下部のサマリー（合計金額、予算）が正しく表示される

#### フェーズ3完了後
- [ ] ショップ削除が正常に完了する（ローカル + Firestore）
- [ ] アイテムの並び替え（ドラッグ&ドロップ）が正常動作する
- [ ] 複数アイテムの一括操作が正常動作する

#### パフォーマンス確認
- [ ] メイン画面でのスクロールがスムーズ（カクつきなし）
- [ ] 画面遷移（設定画面等）がスムーズ
- [ ] アイテム数が多い状態（20件以上）でのリスト操作が快適

## テスト実行コマンド

```bash
# 全テスト実行
flutter test

# 静的分析
flutter analyze

# 特定テストの実行（変更ファイルに関連するテスト）
flutter test test/
```

## リグレッション検知

パフォーマンス改善では動作の変更を行わないため、以下のいずれかが発生した場合はリグレッション:
- 既存テストの失敗
- flutter analyzeでの新規エラー
- UIの表示崩れ
- データの不整合（Firestoreとの同期不良）
