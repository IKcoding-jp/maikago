# ストア申請準備機能

## 概要

まいカゴアプリのストア申請準備機能は、Google Play StoreとApp Storeへの申請に必要なすべての要素を管理し、準備状況を追跡するための包括的なシステムです。

## 機能

### 1. ストア申請準備サービス (`StorePreparationService`)

- **アプリ内購入設定の管理**
- **プライバシーポリシー更新の追跡**
- **利用規約更新の追跡**
- **スクリーンショット準備の管理**
- **コンプライアンスチェックの実行**
- **ストア申請データのエクスポート**

### 2. ストア申請準備画面 (`StorePreparationScreen`)

#### チェックリストタブ
- カテゴリ別の準備項目表示
- インタラクティブなチェックボックス
- 進捗状況の可視化
- 完了項目の自動マーク

#### 状況確認タブ
- 全体準備状況の表示
- アプリ情報の表示
- コンプライアンスチェック結果
- 進捗バーの表示

#### エクスポートタブ
- JSON形式でのデータエクスポート
- CSV形式でのデータエクスポート
- ストア情報の表示
- アプリ内購入商品情報の表示

### 3. 設定ファイル (`StorePreparationConfig`)

- ストアURLの管理
- 商品IDの設定
- 価格設定
- コンプライアンス要件
- 申請手順
- 審査ガイドライン

## 使用方法

### 1. ストア申請準備画面へのアクセス

メイン画面のドロワーメニューから「ストア申請準備」を選択します。

### 2. チェックリストの完了

各項目を順番にチェックして完了としてマークします：

1. **アプリ内購入設定**
   - Google Play Consoleで商品を設定
   - App Store Connectで商品を設定
   - 価格設定の確認

2. **法的要件**
   - プライバシーポリシーの更新
   - 利用規約の更新

3. **ストア申請**
   - スクリーンショットの準備
   - アプリ説明の更新

4. **コンプライアンス**
   - データ保護の確認
   - 解約方法の明記

### 3. 状況確認

状況確認タブで準備の進捗を確認できます：

- 全体準備状況
- アプリ情報
- コンプライアンスチェック結果
- 進捗バー

### 4. データエクスポート

エクスポートタブで申請に必要なデータをエクスポートできます：

- JSON形式：完全なデータ構造
- CSV形式：簡潔な表形式

## 技術仕様

### アーキテクチャ

```
lib/
├── services/
│   └── store_preparation_service.dart      # メインサービス
├── screens/
│   └── store_preparation_screen.dart       # メイン画面
├── widgets/
│   ├── store_checklist_widget.dart         # チェックリスト
│   ├── store_status_widget.dart            # 状況確認
│   └── store_export_widget.dart            # エクスポート
└── config/
    └── store_preparation_config.dart       # 設定ファイル
```

### データフロー

1. **初期化**: `StorePreparationService`がアプリ起動時に初期化
2. **状態管理**: Providerパターンを使用した状態管理
3. **永続化**: SharedPreferencesを使用した設定の永続化
4. **UI更新**: ChangeNotifierを使用したリアルタイムUI更新

### 依存関係

- `package_info_plus`: アプリ情報の取得
- `shared_preferences`: 設定の永続化
- `provider`: 状態管理
- `flutter/material.dart`: UIコンポーネント

## 設定項目

### アプリ内購入商品

| プラン | 月額 | 年額 | 商品ID |
|--------|------|------|--------|
| ベーシック | ¥120 | ¥1,200 | maikago_basic_* |
| プレミアム | ¥240 | ¥2,400 | maikago_premium_* |
| ファミリー | ¥360 | ¥3,600 | maikago_family_* |

### コンプライアンス要件

#### プライバシーポリシー
- 個人情報の収集目的の明記
- データの使用目的の明記
- 第三者提供の制限
- データ削除権利の明記
- サブスクリプション関連の情報収集

#### 利用規約
- サブスクリプションサービスの説明
- 解約方法の明記
- 自動更新の説明
- 家族共有機能の説明
- 返金ポリシーの明記

#### データ保護
- GDPR対応
- CCPA対応
- データ暗号化
- セキュアな通信
- アクセス制御

## 申請手順

### Google Play Store

1. Google Play Consoleにログイン
2. アプリを作成
3. ストア情報を入力
4. アプリ内購入商品を設定
5. プライバシーポリシーをアップロード
6. スクリーンショットをアップロード
7. アプリをアップロード
8. 審査を待つ

### App Store

1. App Store Connectにログイン
2. アプリを作成
3. アプリ情報を入力
4. アプリ内購入商品を設定
5. プライバシーポリシーをアップロード
6. スクリーンショットをアップロード
7. アプリをアップロード
8. 審査を待つ

## スクリーンショット要件

### Android
- 16:9 アスペクト比
- 最小解像度: 320x320px
- 最大解像度: 3840x3840px
- PNGまたはJPEG形式
- 最大ファイルサイズ: 8MB

### iOS
- 6.7インチ (iPhone 14 Pro Max)
- 6.5インチ (iPhone 14 Plus)
- 5.5インチ (iPhone 8 Plus)
- 12.9インチ (iPad Pro)
- 11インチ (iPad Pro)

## 審査ガイドライン

### コンテンツ
- 不適切なコンテンツの排除
- 年齢制限の適切な設定
- 著作権の遵守
- 商標権の遵守

### 機能性
- アプリの安定性
- クラッシュの防止
- 適切なエラーハンドリング
- パフォーマンスの最適化

### サブスクリプション
- 解約方法の明確な表示
- 自動更新の事前通知
- 価格の明確な表示
- 無料トライアルの説明

### プライバシー
- プライバシーポリシーの適切な内容
- データ収集の透明性
- ユーザー同意の取得
- データ削除機能の提供

## トラブルシューティング

### よくある問題

1. **チェックリストが更新されない**
   - アプリを再起動してください
   - 設定をリセットしてください

2. **エクスポートが失敗する**
   - ファイル権限を確認してください
   - ストレージ容量を確認してください

3. **コンプライアンスチェックが失敗する**
   - プライバシーポリシーを更新してください
   - 利用規約を更新してください

### ログの確認

デバッグモードが有効な場合、コンソールに詳細なログが出力されます：

```dart
debugPrint('StorePreparationService: 初期化完了');
debugPrint('StorePreparationService: ストア状態の読み込みに失敗: $e');
```

## 今後の拡張予定

- [ ] 自動スクリーンショット生成
- [ ] ストア申請の自動化
- [ ] 審査状況の追跡
- [ ] 多言語対応
- [ ] クラウド同期機能

## ライセンス

この機能はまいカゴアプリの一部として提供されています。
